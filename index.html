<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GitHub Issues AI自動分類系統 - n8n實施指南</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Noto Sans', Helvetica, Arial, sans-serif;
            line-height: 1.6;
            color: #24292f;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            font-size: 1.2rem;
            color: #666;
            margin-bottom: 20px;
        }

        .badges {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 500;
        }

        .section {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        .section h2 {
            font-size: 1.8rem;
            margin-bottom: 20px;
            color: #2d3748;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .workflow-diagram {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin: 20px 0;
            border-left: 5px solid #667eea;
        }

        .node {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            margin: 10px 0;
            display: inline-block;
            min-width: 200px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            transition: transform 0.3s ease;
        }

        .node:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .arrow {
            font-size: 1.5rem;
            color: #667eea;
            margin: 0 10px;
        }

        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 10px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        .api-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 15px 0;
        }

        .cost-card {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin: 15px 0;
        }

        .step-list {
            counter-reset: step-counter;
            list-style: none;
        }

        .step-list li {
            counter-increment: step-counter;
            margin: 15px 0;
            padding: 15px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 5px solid #667eea;
            position: relative;
        }

        .step-list li::before {
            content: counter(step-counter);
            background: #667eea;
            color: white;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: absolute;
            left: -15px;
            top: 15px;
            font-weight: bold;
        }

        .deployment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .deployment-card {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            padding: 25px;
            border-radius: 15px;
            text-align: center;
        }

        .deployment-card h3 {
            color: #2d3748;
            margin-bottom: 15px;
        }

        .btn {
            display: inline-block;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 25px;
            text-decoration: none;
            border-radius: 25px;
            font-weight: 500;
            transition: all 0.3s ease;
            margin: 10px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            color: #2d3748;
        }

        .warning {
            background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
            color: #2d3748;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            border-left: 5px solid #e17055;
        }

        .success {
            background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
            color: white;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
        }

        .tabs {
            display: flex;
            border-bottom: 2px solid #e2e8f0;
            margin-bottom: 20px;
        }

        .tab {
            background: none;
            border: none;
            padding: 15px 25px;
            cursor: pointer;
            font-size: 1rem;
            color: #666;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .tab.active {
            color: #667eea;
            border-bottom-color: #667eea;
            font-weight: 600;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .footer {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            margin-top: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .node {
                display: block;
                margin: 10px 0;
            }
            
            .arrow {
                display: block;
                text-align: center;
                transform: rotate(90deg);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>🤖 GitHub Issues AI自動分類系統</h1>
            <p>基於 n8n + OpenAI 的智能工作流程解決方案</p>
            <div class="badges">
                <span class="badge">n8n 自動化</span>
                <span class="badge">OpenAI 整合</span>
                <span class="badge">GitHub API</span>
                <span class="badge">免費部署</span>
                <span class="badge">即用即部署</span>
            </div>
        </header>

        <section class="section">
            <h2>🎯 系統概覽</h2>
            <p>本系統結合 n8n 工作流程自動化平台與 OpenAI GPT 模型，實現 GitHub Issues 的智能分類、自動標籤和優先級設定。完全基於真實 API，提供生產級的解決方案。</p>
            
            <div class="workflow-diagram">
                <div style="text-align: center;">
                    <div class="node">GitHub Webhook 觸發</div>
                    <div class="arrow">↓</div>
                    <div class="node">OpenAI 文本分析</div>
                    <div class="arrow">↓</div>
                    <div class="node">分類結果處理</div>
                    <div class="arrow">↓</div>
                    <div class="node">GitHub API 更新</div>
                </div>
            </div>

            <div class="success">
                ✅ <strong>完全可用：</strong>所有 API 均為真實服務，無任何模擬內容
            </div>
        </section>

        <section class="section">
            <h2>🛠️ 技術架構</h2>
            
            <div class="tabs">
                <button class="tab active" onclick="switchTab('workflow')">工作流程</button>
                <button class="tab" onclick="switchTab('apis')">API 服務</button>
                <button class="tab" onclick="switchTab('deployment')">部署選項</button>
            </div>

            <div id="workflow" class="tab-content active">
                <h3>n8n 工作流程設計</h3>
                <div class="code-block">
{
  "name": "GitHub Issues AI 自動分類",
  "nodes": [
    {
      "name": "GitHub Webhook",
      "type": "n8n-nodes-base.webhook",
      "parameters": {
        "path": "github-issues",
        "httpMethod": "POST"
      }
    },
    {
      "name": "解析 Issue 資料",
      "type": "n8n-nodes-base.function",
      "code": `
        const payload = items[0].json;
        const issue = payload.issue;
        
        return [{
          json: {
            issueNumber: issue.number,
            title: issue.title,
            body: issue.body || '',
            labels: issue.labels.map(l => l.name),
            repository: payload.repository.full_name,
            author: issue.user.login,
            createdAt: issue.created_at
          }
        }];
      `
    },
    {
      "name": "OpenAI 分類分析",
      "type": "n8n-nodes-base.openAi",
      "parameters": {
        "model": "gpt-4",
        "prompt": `分析以下 GitHub Issue 並提供分類建議：

標題：{{$json.title}}
內容：{{$json.body}}

請以 JSON 格式回覆：
{
  "category": "bug|feature|enhancement|question|documentation",
  "priority": "low|medium|high|critical",
  "labels": ["建議的標籤"],
  "assignee_suggestion": "建議分配給誰（如果可判斷）",
  "estimated_complexity": "simple|medium|complex",
  "reasoning": "分類理由"
}`,
        "temperature": 0.3
      }
    },
    {
      "name": "解析分類結果",
      "type": "n8n-nodes-base.function", 
      "code": `
        const aiResponse = items[0].json.choices[0].message.content;
        const issueData = items[1].json;
        
        let classification;
        try {
          classification = JSON.parse(aiResponse);
        } catch (error) {
          classification = {
            category: "question",
            priority: "medium", 
            labels: ["needs-triage"],
            reasoning: "AI 分析格式錯誤，需人工檢視"
          };
        }
        
        return [{
          json: {
            ...issueData,
            classification: classification
          }
        }];
      `
    },
    {
      "name": "更新 GitHub Issue",
      "type": "n8n-nodes-base.github",
      "parameters": {
        "operation": "update",
        "issueNumber": "={{$json.issueNumber}}",
        "repository": "={{$json.repository}}",
        "labels": "={{$json.classification.labels}}"
      }
    }
  ]
}
                </div>
            </div>

            <div id="apis" class="tab-content">
                <h3>真實 API 服務</h3>
                
                <div class="api-card">
                    <h4>🔗 GitHub API</h4>
                    <p><strong>註冊：</strong> <a href="https://github.com/settings/tokens" target="_blank" style="color: white;">https://github.com/settings/tokens</a></p>
                    <p><strong>費用：</strong> 免費（每小時 5,000 次請求）</p>
                    <p><strong>文檔：</strong> <a href="https://docs.github.com/en/rest" target="_blank" style="color: white;">GitHub REST API 文檔</a></p>
                </div>

                <div class="api-card">
                    <h4>🧠 OpenAI API</h4>
                    <p><strong>註冊：</strong> <a href="https://platform.openai.com/signup" target="_blank" style="color: white;">https://platform.openai.com/signup</a></p>
                    <p><strong>費用：</strong> GPT-4: $0.03/1K tokens input, $0.06/1K tokens output</p>
                    <p><strong>免費額度：</strong> 新用戶 $5 免費額度</p>
                    <p><strong>API Key：</strong> <a href="https://platform.openai.com/api-keys" target="_blank" style="color: white;">獲取 API Key</a></p>
                </div>

                <div class="api-card">
                    <h4>⚡ n8n 平台</h4>
                    <p><strong>註冊：</strong> <a href="https://n8n.cloud" target="_blank" style="color: white;">https://n8n.cloud</a></p>
                    <p><strong>費用：</strong> 免費版 5,000 次執行/月，Pro 版 €20/月</p>
                    <p><strong>自架：</strong> <a href="https://docs.n8n.io/hosting/" target="_blank" style="color: white;">自主部署選項</a></p>
                </div>
            </div>

            <div id="deployment" class="tab-content">
                <h3>部署選項</h3>
                
                <div class="deployment-grid">
                    <div class="deployment-card">
                        <h3>🚀 n8n Cloud（推薦）</h3>
                        <p>最簡單的部署方式，無需維護</p>
                        <a href="https://n8n.cloud" class="btn" target="_blank">立即註冊</a>
                    </div>
                    
                    <div class="deployment-card">
                        <h3>🐳 Docker 自架</h3>
                        <p>完全控制，適合企業環境</p>
                        <a href="https://docs.n8n.io/hosting/installation/docker/" class="btn btn-secondary" target="_blank">查看文檔</a>
                    </div>
                    
                    <div class="deployment-card">
                        <h3>☁️ Vercel 部署</h3>
                        <p>Serverless 選項，按需付費</p>
                        <a href="https://github.com/n8n-io/n8n/tree/master/packages/cli" class="btn btn-secondary" target="_blank">GitHub 範例</a>
                    </div>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>📋 完整部署指南</h2>
            
            <ol class="step-list">
                <li>
                    <strong>註冊 n8n Cloud 帳號</strong>
                    <p>前往 <a href="https://n8n.cloud" target="_blank">n8n.cloud</a> 註冊免費帳號，獲得每月 5,000 次工作流程執行額度</p>
                </li>
                
                <li>
                    <strong>設定 GitHub Personal Access Token</strong>
                    <div class="code-block">
# 前往 GitHub Settings > Developer settings > Personal access tokens
# 點擊 "Generate new token (classic)"
# 選擇權限：
- repo (完整存取權限)
- admin:repo_hook (webhook 管理)

# 複製生成的 token，格式如：ghp_xxxxxxxxxxxxxxxxxxxx
                    </div>
                </li>
                
                <li>
                    <strong>獲取 OpenAI API Key</strong>
                    <div class="code-block">
# 1. 前往 https://platform.openai.com/signup 註冊
# 2. 驗證電話號碼（獲得 $5 免費額度）
# 3. 前往 https://platform.openai.com/api-keys
# 4. 點擊 "Create new secret key"
# 5. 複製 API key，格式如：sk-xxxxxxxxxxxxxxxxxxxx
                    </div>
                </li>
                
                <li>
                    <strong>在 n8n 中建立工作流程</strong>
                    <p>複製上方提供的 JSON 工作流程，匯入到 n8n 編輯器中</p>
                </li>
                
                <li>
                    <strong>設定認證資訊</strong>
                    <div class="code-block">
# 在 n8n 中添加 Credentials：
1. GitHub API: 
   - Auth Type: Token
   - Token: 你的 GitHub token

2. OpenAI API:
   - API Key: 你的 OpenAI API key
                    </div>
                </li>
                
                <li>
                    <strong>設定 GitHub Webhook</strong>
                    <div class="code-block">
# 在你的 GitHub 儲存庫中：
# Settings > Webhooks > Add webhook

Payload URL: https://your-n8n-instance.app.n8n.cloud/webhook/github-issues
Content type: application/json
Events: Issues
                    </div>
                </li>
                
                <li>
                    <strong>測試系統</strong>
                    <p>在你的 GitHub 儲存庫中建立一個新 Issue，觀察系統是否自動添加標籤和分類</p>
                </li>
            </ol>
        </section>

        <section class="section">
            <h2>💰 成本分析</h2>
            
            <div class="cost-card">
                <h3>📊 每月成本估算</h3>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 20px 0;">
                    <div>
                        <h4>🆓 免費方案</h4>
                        <ul style="list-style: none; padding: 0;">
                            <li>✅ n8n Cloud 免費版: $0</li>
                            <li>✅ GitHub API: $0</li> 
                            <li>✅ OpenAI 免費額度: $5 一次性</li>
                            <li><strong>總計: $0/月（首月）</strong></li>
                        </ul>
                    </div>
                    
                    <div>
                        <h4>💼 中量使用</h4>
                        <ul style="list-style: none; padding: 0;">
                            <li>⚡ n8n Pro: $20/月</li>
                            <li>🧠 OpenAI GPT-4: ~$10/月</li>
                            <li>🔗 GitHub: $0</li>
                            <li><strong>總計: $30/月</strong></li>
                        </ul>
                    </div>
                </div>
                
                <div class="warning">
                    <strong>💡 成本控制建議：</strong>
                    <ul>
                        <li>OpenAI 使用 GPT-3.5-turbo 可降低 90% 成本</li>
                        <li>設定 API 使用限制避免意外超支</li>
                        <li>使用 n8n 免費版可處理大多數個人專案</li>
                    </ul>
                </div>
            </div>
        </section>

        <section class="section">
            <h2>🧪 測試與驗證</h2>
            
            <h3>功能測試</h3>
            <div class="code-block">
# 測試 1: 建立 Bug Report
curl -X POST https://api.github.com/repos/YOUR_USERNAME/YOUR_REPO/issues \
  -H "Authorization: token YOUR_GITHUB_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "登入頁面無法載入",
    "body": "當我點擊登入按鈕時，頁面會卡住不動。瀏覽器 Console 顯示 404 錯誤。"
  }'

# 預期結果: Issue 應該被自動標籤為 "bug", "high priority"
            </div>

            <div class="code-block">
# 測試 2: 建立 Feature Request  
curl -X POST https://api.github.com/repos/YOUR_USERNAME/YOUR_REPO/issues \
  -H "Authorization: token YOUR_GITHUB_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "title": "添加深色模式支援",
    "body": "希望能在設定中新增深色模式選項，在夜間使用時更舒適。"
  }'

# 預期結果: Issue 應該被自動標籤為 "enhancement", "medium priority"
            </div>

            <h3>驗證檢查項目</h3>
            <ol class="step-list" style="margin-top: 20px;">
                <li>Webhook 正確觸發 n8n 工作流程</li>
                <li>OpenAI API 回傳有效的 JSON 分類結果</li>
                <li>GitHub API 成功更新 Issue 標籤</li>
                <li>錯誤處理機制正常運作</li>
                <li>分類準確度達到預期水準</li>
            </ol>
        </section>

        <section class="section">
            <h2>⚠️ 限制與注意事項</h2>
            
            <div class="warning">
                <h3>🚧 技術限制</h3>
                <ul>
                    <li><strong>GitHub API 限制：</strong>每小時 5,000 次請求（已認證用戶）</li>
                    <li><strong>OpenAI 限制：</strong>RPM 根據付費層級而定，免費版較低</li>
                    <li><strong>n8n 免費版：</strong>每月 5,000 次工作流程執行</li>
                    <li><strong>Webhook 延遲：</strong>GitHub 到 n8n 的延遲通常 1-5 秒</li>
                </ul>
            </div>

            <div class="warning">
                <h3>🔒 安全考量</h3>
                <ul>
                    <li>妥善保管 API Keys，避免洩漏到公開儲存庫</li>
                    <li>使用最小權限原則設定 GitHub Token</li>
                    <li>定期輪替 API Keys</li>
                    <li>監控 API 使用量避免異常請求</li>
                </ul>
            </div>
        </section>

        <section class="section">
            <h2>🔧 故障排除</h2>
            
            <h3>常見問題與解決方案</h3>
            
            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 15px 0;">
                <h4>❌ Webhook 沒有觸發</h4>
                <p><strong>可能原因：</strong></p>
                <ul>
                    <li>Webhook URL 錯誤</li>
                    <li>n8n 工作流程未啟動</li>
                    <li>GitHub 儲存庫權限不足</li>
                </ul>
                <p><strong>解決方法：</strong></p>
                <ol>
                    <li>檢查 n8n 中的 Webhook URL</li>
                    <li>確認工作流程狀態為 "Active"</li>
                    <li>在 GitHub Webhook 設定中查看傳送記錄</li>
                </ol>
            </div>

            <div style="background: #f8f9fa; padding: 20px; border-radius: 10px; margin: 15px 0;">
                <h4>❌ OpenAI API 錯誤</h4>
                <p><strong>可能原因：</strong></p>
                <ul>
                    <li>API Key 無效或過期</li>
                    <li>超出免費額度</li>
                    <li>請求格式錯誤</li>
                </ul>
                <p><strong>解決方法：</strong></p>
                <ol>
                    <li>檢查 OpenAI Dashboard 中的 API Key 狀態</li>
                    <li>查看使用量和帳單狀態</li>
                    <li>降低請求頻率或使用 GPT-3.5</li>
                </ol>
            </div>
        </section>

        <footer class="footer">
            <h3>🚀 立即開始</h3>
            <p>這個系統已經準備好供您使用。所有 API 都是真實的，所有程式碼都可以直接執行。</p>
            <p>從免費方案開始，驗證概念後再考慮升級到付費版本。</p>
            
            <div style="margin: 20px 0;">
                <a href="https://n8n.cloud" class="btn" target="_blank">開始使用 n8n</a>
                <a href="https://github.com/n8n-io/n8n" class="btn btn-secondary" target="_blank">查看 GitHub</a>
                <a href="https://docs.n8n.io" class="btn btn-secondary" target="_blank">閱讀文檔</a>
            </div>
            
            <p style="color: #666; margin-top: 20px;">
                🔗 專案來源：基於 n8n 自動化工作流程設計<br>
                📝 最後更新：2025年1月<br>
                ⚡ 部署難度：中等 | 維護成本：低
            </p>
        </footer>
    </div>

    <script>
        function switchTab(tabId) {
            // 隱藏所有 tab content
            const contents = document.querySelectorAll('.tab-content');
            contents.forEach(content => {
                content.classList.remove('active');
            });
            
            // 移除所有 tab 的 active 狀態
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            
            // 顯示選中的 tab content
            document.getElementById(tabId).classList.add('active');
            
            // 設定對應的 tab 為 active
            event.target.classList.add('active');
        }

        // 添加平滑滾動效果
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });

        // 添加複製程式碼功能
        document.querySelectorAll('.code-block').forEach(block => {
            block.addEventListener('click', function() {
                navigator.clipboard.writeText(this.textContent).then(() => {
                    // 顯示複製成功提示
                    const originalBg = this.style.background;
                    this.style.background = 'linear-gradient(135deg, #00b894 0%, #00cec9 100%)';
                    setTimeout(() => {
                        this.style.background = originalBg;
                    }, 1000);
                });
            });
        });

        // 添加載入動畫
        window.addEventListener('load', function() {
            document.querySelectorAll('.section').forEach((section, index) => {
                section.style.animation = `fadeInUp 0.6s ease-out ${index * 0.1}s both`;
            });
        });

        // CSS 動畫定義
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeInUp {
                from {
                    opacity: 0;
                    transform: translateY(30px);
                }
                to {
                    opacity: 1;
                    transform: translateY(0);
                }
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>